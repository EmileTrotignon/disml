image: ocaml/opam:latest

before_script:
  - opam init
  - eval `opam config env`
  - opam update
  - opam upgrade
  - opam install dune odoc

pages:
  stage: deploy
  script:
  - dune build @doc
  artifacts:
    paths:
    - _build/default/_doc/_html
  only:
  - master